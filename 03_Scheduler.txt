Update 2026.01.15

구조변경중.
Module : 기능을 이야기 합니다 (예시 LCD 모듈 -> LCD1, LCD2)
Operation : 동작을 이야기 합니다 (예시 18Bit 모드)
Action :
Dual LCD 같은 동일한 칩 인경우 동일한 스케쥴을 돌기 때문에
Work 테이블을 다른 인터페이스와 공유 할 수 있게  함수 인자를 추가하는 작업

Schadule 테이블 종류는 기본 4단계로 구성됩니다.
[초기화구간_1][설정구간_2][Loop구간_3][에러처리구간_4]

Schedule 용어는 Task 등 기존 용어와 혼용 사용시 충돌을 하지 않기 위해
Job. Action 등의 처리 단계로 표현.



Poling 방식의 구조를 규격화 하기위한 제어 모듈 설명
RTOS 처럼 Context Switch를 통한 Task 점유을 제어가 아닌 폴링 방식의 동작 스케쥴을 제어하기 위한 구조임.

Scheduler 구성 요소 (필수로 존재해야 되는 기능만) 

Scheduler : 하나의 기능에 동작에 필요한 함수 모음.
  - lcd_st7765_schedule_table (동작 모드를 결정 하여 모듈 돌릴 Work Table을 선정)
    - lcd_st7765_18bit_work_table
      - lcd_st7765_en_reset_job_table
        - lcd_st7765_en_off_func
        - lcd_st7765_en_on_func
      - LCD_ST7765_18bit_set_Job
    - Work_ST7765_16bit_Work_Table
  - LCD_ST7861_Schedule

typedef enum{
    m_SCH_ERROR_CODE_NO_ERROR,      /* 에러 없음 (No error)*/
    m_SCH_ERROR_CODE_TIME_OUT,      /* 타임 아웃 (Timeout)*/
    m_SCH_ERROR_CODE_CRC,           /* CRC 에러 */
    m_SCH_ERROR_CODE_DATA,
    m_SCH_ERROR_CODE_READ,
    m_SCH_ERROR_CODE_READ_OVF,
    m_SCH_ERROR_CODE_WRITE,
    m_SCH_ERROR_CODE_WRITE_OVF
}te_SCH_Error_Code;


typedef struct{
    /* 제어 변수 */
    uint32 v_active;                    // 0: Disable, 1 ~ 0xFFFFFFFF: 1은 활성  1이상 < skip count 2는 2회 마다 한번수행;
    uint32 v_skip;                      // 부하를 줄이기 위해 SKIP 단위 설정.
    uint32 v_priority;                  // 우선 순위등급 높을수록 높음 

    /* Schedule 테이블 정보 */
    void (**ps_wf_table)(void);         // Workflow 테이블 리스트.
    uint32 v_wf_table_size;             // Workflow 태이블 사이즈 정보.
    uint32 v_wf_table_pos;              // workflow 태이블 위치 정보.
    void (*pf_wf_func)(void);           // Workflow 함수 포인터.
    uint32 v_wf_next_delay;             // Workflow 다음 동작시 대기시간 (us).
    uint32 v_wf_time;                   // Workflow 수행 시간 (us).
    uint32 v_wf_time_avg;               // Workflow 수행 시간 평균 10회 (us).
    uint32 v_wf_time_max;               // Workflow 수행 시간 최대 (us).

    /* JOB 테이블 */
    void (**ps_job_table)(void);        // job 테이블
    uint32 v_job_table_size;            // Job 테이블 사이즈
    uint32 v_job_table_pos;             // Job 테이블 위치.
    void (*pf_job_func)(void);          // job 함수
    uint32 v_job_next_delay;            // job 다음 동작시 대기시간 (us).
    uint32 v_job_setp_pos;              // job 함수 내부 Switch 위치 정보.
    uint32 v_job_timeout;               // job 타임 아웃.

    /* 에러 정보 */
    uint32 v_error_pos;                 // Schedule error position.
    uint32 v_error_step;                // Schedule error step(case) postion.
    te_SCH_Error_Code e_error_code;     // Schedule error code.
    uint32 v_error_count;               // Schedule error total count.
}ts_SCH_ctrl;

/* 스케쥴러 테이블 Main 타임 함수 */
static void (*pf_base_main_schedule_table[d_BASE_MAIN_TABLE_SIZE])(void) = {
    f_Base_Main_TBase_1ms,
    f_Base_Main_TBase_10ms,
    f_Base_Main_TBase_100ms,
    f_Base_Main_TBase_500ms,
    f_Base_Main_TBase_1s
};
/* scheduler 제어 변수)
ts_SCH_ctrl gs_base_main_sch_ctrl;
